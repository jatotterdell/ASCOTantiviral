# ASCOT Antiviral Domain Analyses

Analysis scripts for the close-out of the ASCOT antiviral domain.

## Project Setup

The project assumes that a `.Renviron` file exists in the project directory and defines a variable `ASCOT_DATA` which provides the top level directory of the RDS location. On my system this is:

```{r}
ASCOT_DATA = "/media/rds/PRJ-ascotsims/data"
```

The `.Rprofile` file then defines a few additional global constants.

Both are automatically loaded when opening `ASCOTantiviral.Rproj`.

### Quarto

Interactive notebooks are written using [Quarto](https://quarto.org/docs/get-started/).
To render the notebooks, either use the `quarto` package in RStudio or use the CLI by running

```
quarto render .
```

to render all documents, or

```
quarto render analyses/<filename>.qmd
quarto preview analyses/<filename>.qmd
```

to render/preview a specific file only.

Rendered documents are output to `docs/`.

Changes can be monitored by using, for example

```{r}
quarto::quarto_preview()
```

from RStudio.


### Directories

Planned structure

```
.
├── analyses
├── docs
├── eda
├── outputs
│   ├── figures
│   ├── models
│   └── tables
├── r
├── report
└── stan
```

Note that `docs` and `outputs` are not tracked and will be generated by rendering the project.

## Raw Data

If desired, the raw datasets can be added to the global environment with, for example,

```{r}
source("R/read_raw_data.r")
read_raw_extract("enrolled")
read_all_raw_extracts()
```

or alternatively

```{r}
devtools::load_all()
read_raw_extract("enrolled")
read_all_raw_extracts()
```

Otherwise, it is better to work from the derived datasets:

```{r}
read_all_no_daily()
read_all_daily()
```
